<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNU 2025 | Bloco 6 - Preparação</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX compilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* slate-100 */
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #4f46e5; /* indigo-600 */
            width: 40px;
            height: 40px;
            -webkit-animation: spin 2s linear infinite; /* Safari */
            animation: spin 2s linear infinite;
        }

        /* Safari */
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-100">
    
    <div id="root"></div>

    <!-- Firebase Services Loader -->
    <script type="module">
        // Importações do Firebase - O coração da nossa persistência de dados
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getFirestore, doc, onSnapshot, setDoc } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

        // ==================================================================
        // CONFIGURAÇÃO DO FIREBASE ATIVADA
        // ==================================================================
        const firebaseConfig = {
            apiKey: "AIzaSyDCz05LDYnOx7WAuXB4eb5dCb0Ngf8BPCg",
            authDomain: "cnu-2025-c032d.firebaseapp.com",
            projectId: "cnu-2025-c032d",
            storageBucket: "cnu-2025-c032d.appspot.com",
            messagingSenderId: "407935027244",
            appId: "1:407935027244:web:e347be76ffd12771fc6989",
            measurementId: "G-1DNK2E57JB"
        };

        // Expondo os serviços do Firebase para a aplicação React
        window.FirebaseServices = {};

        try {
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            
            window.FirebaseServices = {
                db,
                doc,
                onSnapshot,
                setDoc
            };
        } catch (error) {
            console.error("Erro ao inicializar o Firebase. Verifique suas chaves de configuração.", error);
        }
    </script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // Acessando os serviços do Firebase que foram carregados no script anterior
        const { db, doc, onSnapshot, setDoc } = window.FirebaseServices;

        // --- ÍCONES (SVG) ---
        const CheckCircle = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const XCircle = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const FlagIcon = ({ marked }) => <svg xmlns="http://www.w3.org/2000/svg" className={`h-6 w-6 cursor-pointer ${marked ? 'text-indigo-600 fill-current' : 'text-slate-400 hover:text-indigo-500'}`} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 21v-2l9-9 4 4-9 9H3zm15-11l-4-4 1.5-1.5a2.121 2.121 0 013 3L18 10z" /></svg>;
        const BookOpenIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>;
        const ChartBarIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>;
        const HomeIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>;
        const CalendarIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>;
        const BrainIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4.871 15.137A7.5 7.5 0 0112 7.5h0a7.5 7.5 0 017.129 7.637m-14.258 0A7.5 7.5 0 0012 22.5h0a7.5 7.5 0 007.129-7.363m-14.258 0l-.354.353A.5.5 0 005 18.5v-1.5a.5.5 0 00-.483-.499l-.354-.052m14.258 0l.354.353a.5.5 0 01.483.853v-1.5a.5.5 0 01.483-.499l.354-.052M9 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zm6 0a.75.75 0 110-1.5.75.75 0 010 1.5z"/></svg>;
        const LogoutIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>;
        const LockClosedIcon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>;
        const BrazilFlagIcon = () => (
            <svg width="28" height="20" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" className="mr-3 rounded-sm">
                <rect width="28" height="20" fill="#009B3A"/>
                <path d="M14 3L25 10L14 17L3 10L14 3Z" fill="#FFCC29"/>
                <circle cx="14" cy="10" r="4" fill="#002776"/>
            </svg>
        );

        // --- BANCO DE DADOS DE QUESTÕES ---
        const questoes = [
            // Conhecimentos Gerais (30 questões)
            { id: 1, type: 'CG', enunciado: "A Constituição Federal de 1988 estabelece um complexo sistema de freios e contrapesos entre os Poderes. A possibilidade de o Congresso Nacional derrubar um veto presidencial a um projeto de lei é um exemplo de controle exercido pelo:", alternatives: [{ texto: "Poder Judiciário sobre o Poder Executivo.", correta: false }, { texto: "Poder Legislativo sobre o Poder Executivo.", correta: true }, { texto: "Poder Executivo sobre o Poder Legislativo.", correta: false }, { texto: "Poder Moderador sobre o Poder Executivo.", correta: false }, { texto: "Conselho Nacional de Justiça sobre o Congresso Nacional.", correta: false }], explicacao: "A derrubada de um veto presidencial é uma das mais importantes prerrogativas do Poder Legislativo para se contrapor a uma decisão do chefe do Poder Executivo, garantindo o equilíbrio entre os poderes." },
            { id: 2, type: 'CG', enunciado: "No ciclo de políticas públicas, a etapa de 'avaliação' é fundamental para aprimorar a ação governamental. Uma avaliação de impacto, por exemplo, busca mensurar:", alternatives: [{ texto: "O número de beneficiários atendidos pela política.", correta: false }, { texto: "Os efeitos causais da política sobre os resultados de interesse, isolando outros fatores.", correta: true }, { texto: "O custo total da implementação da política.", correta: false }, { texto: "A satisfação da opinião pública com a política.", correta: false }, { texto: "A conformidade legal dos processos de execução da política.", correta: false }], explicacao: "A avaliação de impacto vai além de indicadores simples, utilizando métodos quasi-experimentais para determinar se as mudanças observadas (ex: redução da evasão escolar) foram de fato causadas pela política pública em questão." },
            { id: 3, type: 'CG', enunciado: "A Lei de Acesso à Informação (LAI) - Lei nº 12.527/2011 - representa um marco para a transparência pública no Brasil. Segundo a LAI, a regra geral é:", alternatives: [{ texto: "O sigilo das informações públicas, com poucas exceções.", correta: false }, { texto: "A publicidade das informações, sendo o sigilo a exceção.", correta: true }, { texto: "Que apenas cidadãos com nível superior podem solicitar informações.", correta: false }, { texto: "Que o acesso à informação depende de justificativa prévia do solicitante.", correta: false }, { texto: "Que informações sobre salários de servidores são permanentemente sigilosas.", correta: false }], explicacao: "A LAI inverteu a lógica anterior, estabelecendo a publicidade como preceito geral e o sigilo como exceção, aplicável apenas em casos específicos previstos em lei, fortalecendo o controle social." },
            
            // Eixo 1 (10 questões)
            { id: 101, type: 'CE', eixo: 1, enunciado: "Celso Furtado, em 'Formação Econômica do Brasil', argumenta que a persistência do subdesenvolvimento brasileiro está intrinsecamente ligada à sua formação histórica. Segundo a perspectiva furtadiana, a superação dessa condição exigiria, fundamentalmente:", alternatives: [{ texto: "Aprofundar a especialização produtiva nas commodities agrícolas.", correta: false }, { texto: "Uma política de industrialização por substituição de importações (ISI) planejada pelo Estado.", correta: true }, { texto: "A liberalização completa dos mercados e a atração de investimento estrangeiro direto.", correta: false }, { texto: "A priorização exclusiva de políticas de distribuição de renda.", correta: false }, { texto: "A adoção de uma política cambial flutuante.", correta: false }], explicacao: "A tese central de Celso Furtado é que o subdesenvolvimento não é uma etapa, mas uma consequência da integração periférica ao capitalismo. A industrialização planejada pelo Estado era vista como o caminho para romper a dependência." },
            { id: 102, type: 'CE', eixo: 1, enunciado: "Os Objetivos de Desenvolvimento Sustentável (ODS) representam uma evolução do conceito de desenvolvimento. Qual ODS melhor reflete a interconexão entre erradicação da pobreza e sustentabilidade ambiental?", alternatives: [{ texto: "ODS 8: Trabalho Decente e Crescimento Econômico.", correta: false }, { texto: "ODS 1: Erradicação da Pobreza.", correta: false }, { texto: "ODS 13: Ação Contra a Mudança Global do Clima.", correta: false }, { texto: "Todos os ODS são interconectados, vinculando acesso a recursos (ODS 7) à melhoria de vida.", correta: true }, { texto: "ODS 10: Redução das Desigualdades.", correta: false }], explicacao: "A Agenda 2030 baseia-se na 'indivisibilidade'. A erradicação da pobreza (ODS 1) depende de acesso a energia limpa (ODS 7), água (ODS 6) e cidades sustentáveis (ODS 11), unindo o social e o ambiental." },
            { id: 103, type: 'CE', eixo: 1, enunciado: "A teoria da dependência, de FHC e Faletto, critica a visão da CEPAL, argumentando que a burguesia dos países periféricos:", alternatives: [{ texto: "É uma classe revolucionária com interesse em romper com o capital internacional.", correta: false }, { texto: "É uma classe associada e dependente do capital internacional, promovendo um desenvolvimento que reforça a dependência.", correta: true }, { texto: "Não possui qualquer relevância para a análise do desenvolvimento.", correta: false }, { texto: "Atua de forma idêntica à burguesia dos países centrais.", correta: false }, { texto: "É majoritariamente agrária e se opõe a qualquer forma de industrialização.", correta: false }], explicacao: "A teoria da dependência analisa como a burguesia periférica se associa ao capital estrangeiro, promovendo um 'desenvolvimento dependente' que moderniza sem romper a subordinação estrutural." },
            { id: 104, type: 'CE', eixo: 1, enunciado: "O Programa Bolsa Família, uma política de transferência de renda condicionada, é um exemplo de política pública que busca atuar em qual dimensão da inclusão social?", alternatives: [{ texto: "Exclusivamente na geração de empregos formais.", correta: false }, { texto: "No alívio imediato da pobreza e na quebra do ciclo intergeracional da pobreza através de condicionalidades em saúde e educação.", correta: true }, { texto: "No fomento ao empreendedorismo de alta tecnologia.", correta: false }, { texto: "Na reforma agrária e na distribuição de terras.", correta: false }, { texto: "Na construção de grandes obras de infraestrutura.", correta: false }], explicacao: "O Bolsa Família combina a transferência direta de renda, que combate a pobreza imediata, com condicionalidades (frequência escolar, vacinação) que visam investir no capital humano das futuras gerações, rompendo o ciclo da pobreza." },
            { id: 105, type: 'CE', eixo: 1, enunciado: "O conceito de 'desenvolvimento como liberdade', de Amartya Sen, propõe que o desenvolvimento deve ser medido não apenas pelo crescimento do PIB, mas principalmente pela:", alternatives: [{ texto: "Capacidade do Estado em controlar a economia.", correta: false }, { texto: "Expansão das liberdades substantivas e das capacidades dos indivíduos de escolherem a vida que desejam valorizar.", correta: true }, { texto: "Acumulação de riqueza material pela nação.", correta: false }, { texto: "Força militar e influência geopolítica do país.", correta: false }, { texto: "Taxa de urbanização e modernização industrial.", correta: false }], explicacao: "Para Amartya Sen, o desenvolvimento é um processo de expansão das liberdades reais que as pessoas desfrutam. A renda é um meio, mas o fim é a liberdade de escolha e a capacidade de viver uma vida plena." },
            { id: 106, type: 'CE', eixo: 1, enunciado: "Qual das seguintes ações está mais alinhada com os princípios da Economia Circular, um pilar da sustentabilidade?", alternatives: [{ texto: "Aumentar a extração de matérias-primas virgens para baratear a produção.", correta: false }, { texto: "Projetar produtos para serem duráveis, reparáveis, reutilizáveis e, em último caso, recicláveis, minimizando o desperdício.", correta: true }, { texto: "Incentivar o consumo descartável para acelerar o crescimento econômico.", correta: false }, { texto: "Focar apenas na eficiência energética da produção, sem se preocupar com o ciclo de vida do produto.", correta: false }, { texto: "Exportar resíduos para países em desenvolvimento.", correta: false }], explicacao: "A Economia Circular se opõe ao modelo linear de 'extrair-produzir-descartar'. Seu foco é manter materiais e produtos em uso pelo maior tempo possível, extraindo o máximo de valor deles." },
            { id: 107, type: 'CE', eixo: 1, enunciado: "O Sistema Único de Assistência Social (SUAS) no Brasil organiza a proteção social por níveis de complexidade. A qual nível pertencem os Centros de Referência de Assistência Social (CRAS)?", alternatives: [{ texto: "Proteção Social Especial de Alta Complexidade, para acolhimento institucional.", correta: false }, { texto: "Proteção Social Básica, com foco na prevenção de situações de risco e no fortalecimento de vínculos familiares e comunitários.", correta: true }, { texto: "Gestão do Cadastro Único, exclusivamente.", correta: false }, { texto: "Proteção Social Especial de Média Complexidade, para atender famílias com direitos violados.", correta: false }, { texto: "Vigilância Socioassistencial, para monitoramento de dados.", correta: false }], explicacao: "O CRAS é a porta de entrada do SUAS e pertence à Proteção Social Básica. Seu trabalho é preventivo e proativo, buscando evitar o rompimento de laços e a ocorrência de situações de vulnerabilidade." },
            { id: 108, type: 'CE', eixo: 1, enunciado: "A 'Tragédia dos Comuns', de Garrett Hardin, descreve uma situação em que recursos compartilhados são superexplorados. Qual das seguintes opções é uma solução clássica para esse problema?", alternatives: [{ texto: "Aumentar o número de usuários do recurso.", correta: false }, { texto: "A privatização do recurso ou a sua gestão por uma autoridade central (Estado) que estabelece regras de uso.", correta: true }, { texto: "Deixar o recurso sem nenhuma regra, confiando na boa vontade dos usuários.", correta: false }, { texto: "Subsidiar a exploração do recurso para torná-la mais barata.", correta: false }, { texto: "Ignorar o problema, pois o mercado se autorregulará.", correta: false }], explicacao: "Hardin argumentou que a solução para a 'Tragédia dos Comuns' seria a 'coerção mútua, mutuamente acordada', que se traduz na criação de direitos de propriedade (privatização) ou na regulação estatal para limitar o acesso e a exploração do recurso." },
            { id: 109, type: 'CE', eixo: 1, enunciado: "O conceito de 'racismo estrutural' refere-se a:", alternatives: [{ texto: "Atos isolados de preconceito cometidos por indivíduos.", correta: false }, { texto: "A normalização e legitimação de dinâmicas históricas, culturais e institucionais que produzem e reproduzem desigualdades raciais.", correta: true }, { texto: "Leis que explicitamente discriminam com base na raça, que já foram revogadas.", correta: false }, { texto: "Uma forma de preconceito que afeta apenas as relações interpessoais.", correta: false }, { texto: "Um fenômeno exclusivo da história dos Estados Unidos.", correta: false }], explicacao: "O racismo estrutural vai além do preconceito individual. Ele se manifesta nas instituições, práticas e normas sociais que, mesmo sem intenção discriminatória explícita, perpetuam a desvantagem de grupos raciais específicos." },
            { id: 110, type: 'CE', eixo: 1, enunciado: "Qual o principal objetivo da Política Nacional de Resíduos Sólidos (PNRS), instituída pela Lei nº 12.305/2010 no Brasil?", alternatives: [{ texto: "Incentivar a criação de lixões a céu aberto.", correta: false }, { texto: "Estabelecer a responsabilidade compartilhada pelo ciclo de vida dos produtos e a gestão integrada dos resíduos sólidos.", correta: true }, { texto: "Proibir a reciclagem de todos os materiais.", correta: false }, { texto: "Tornar os municípios os únicos responsáveis pela gestão do lixo.", correta: false }, { texto: "Focar exclusivamente na incineração como método de descarte.", correta: false }], explicacao: "A PNRS é um marco legal que introduz o princípio da responsabilidade compartilhada, envolvendo fabricantes, importadores, distribuidores, comerciantes, consumidores e o poder público na gestão dos resíduos. Ela também estabelece uma hierarquia: não geração, redução, reutilização, reciclagem, tratamento e, por fim, a disposição final ambientalmente adequada." },

            // Eixo 2 (10 questões)
            { id: 201, type: 'CE', eixo: 2, enunciado: "A Nova Geografia Econômica (Paul Krugman) explica a concentração industrial, como a do ABC Paulista, principalmente por:", alternatives: [{ texto: "Dotações de recursos naturais específicas.", correta: false }, { texto: "Políticas governamentais de descentralização industrial.", correta: false }, { texto: "Forças centrípetas, como grande mercado consumidor e mão de obra especializada, que se retroalimentam.", correta: true }, { texto: "Uma vantagem comparativa estática na produção de bens manufaturados.", correta: false }, { texto: "Custos de transporte irrelevantes.", correta: false }], explicacao: "A Nova Geografia Econômica foca em forças de aglomeração (mercado, fornecedores, mão de obra) que, após uma massa crítica ser atingida, criam um processo de 'causalidade cumulativa', reforçando a concentração espacial." },
            { id: 202, type: 'CE', eixo: 2, enunciado: "Políticas de desenvolvimento regional no Brasil, como as da SUDENE, são criticadas porque muitas vezes:", alternatives: [{ texto: "Geraram uma industrialização autossustentável e endógena no Nordeste.", correta: false }, { texto: "Atraíram 'fábricas de parafusos', com poucos elos na economia local e baixo impacto multiplicador.", correta: true }, { texto: "Foram excessivamente focados em pequenas e médias empresas locais.", correta: false }, { texto: "Resultaram em um custo fiscal nulo para o Estado.", correta: false }, { texto: "Eliminaram completamente as desigualdades regionais.", correta: false }], explicacao: "A crítica da 'guerra fiscal' aponta que empresas podem apenas transferir produção sem criar uma cadeia produtiva local robusta, resultando em um desenvolvimento dependente de subsídios." },
            { id: 203, type: 'CE', eixo: 2, enunciado: "Arranjos Produtivos Locais (APLs) são aglomerações de empresas em um mesmo território que apresentam especialização produtiva e mantêm vínculos de cooperação. Qual é a principal vantagem de um APL para o desenvolvimento produtivo?", alternatives: [{ texto: "Aumentar a competição predatória entre as empresas locais.", correta: false }, { texto: "Gerar ganhos de eficiência coletiva (externalidades) através da cooperação, da troca de informações e da divisão do trabalho.", correta: true }, { texto: "Isolar a região do mercado global, focando apenas no consumo local.", correta: false }, { texto: "Depender exclusivamente de uma única grande empresa âncora.", correta: false }, { texto: "Reduzir a necessidade de inovação, já que as empresas copiam umas às outras.", correta: false }], explicacao: "A força dos APLs reside na 'eficiência coletiva', um conceito que descreve como a proximidade e a cooperação entre empresas geram vantagens competitivas que seriam difíceis de alcançar individualmente, como acesso a fornecedores especializados, mão de obra qualificada e difusão de conhecimento." },
            { id: 204, type: 'CE', eixo: 2, enunciado: "A Lei de Inovação (Lei nº 10.973/2004) foi criada no Brasil para:", alternatives: [{ texto: "Restringir a colaboração entre universidades e empresas.", correta: false }, { texto: "Estimular e regulamentar a cooperação entre universidades, institutos de pesquisa e empresas para o desenvolvimento tecnológico.", correta: true }, { texto: "Proibir a importação de tecnologia estrangeira.", correta: false }, { texto: "Centralizar toda a pesquisa científica em uma única agência estatal.", correta: false }, { texto: "Conceder patentes de forma automática para qualquer invenção.", correta: false }], explicacao: "A Lei de Inovação é um marco para o Sistema Nacional de Ciência, Tecnologia e Inovação (SNCTI), pois cria mecanismos para facilitar a transferência de conhecimento do setor acadêmico para o setor produtivo, incentivando a inovação nas empresas." },
            { id: 205, type: 'CE', eixo: 2, enunciado: "O conceito de 'Sistema Nacional de Inovação' (SNI) refere-se:", alternatives: [{ texto: "A uma única empresa inovadora em um país.", correta: false }, { texto: "À rede de instituições dos setores público e privado cujas atividades e interações iniciam, importam, modificam e difundem novas tecnologias.", correta: true }, { texto: "Apenas às universidades e seus laboratórios de pesquisa.", correta: false }, { texto: "A um programa de governo com duração limitada.", correta: false }, { texto: "Às leis de patente de um país.", correta: false }], explicacao: "O SNI é uma abordagem sistêmica que entende a inovação não como um ato isolado, mas como o resultado da interação complexa entre diversos atores (empresas, universidades, governo, agências de fomento, etc.) e das políticas que regem essa interação." },
            { id: 206, type: 'CE', eixo: 2, enunciado: "Qual das seguintes opções descreve melhor a política industrial brasileira no início do século XXI, em contraste com o modelo de substituição de importações?", alternatives: [{ texto: "Foco exclusivo na proteção de mercados contra importados.", correta: false }, { texto: "Tentativas de inserção competitiva em cadeias globais de valor, com foco em setores considerados estratégicos e estímulo à inovação.", correta: true }, { texto: "Abandono completo de qualquer política industrial, adotando o livre mercado puro.", correta: false }, { texto: "Estatização em massa de todos os setores industriais.", correta: false }, { texto: "Concentração apenas na indústria de base, como siderurgia e petroquímica.", correta: false }], explicacao: "As políticas industriais mais recentes (como a Política de Desenvolvimento Produtivo - PDP) buscaram superar a antiga visão de substituição de importações, focando em ganhos de competitividade, inovação e na inserção do Brasil em segmentos de maior valor agregado nas cadeias globais." },
            { id: 207, type: 'CE', eixo: 2, enunciado: "A 'doença holandesa' é um fenômeno econômico que pode afetar o desenvolvimento produtivo de um país. Ela se caracteriza por:", alternatives: [{ texto: "Uma crise sanitária que afeta a produtividade industrial.", correta: false }, { texto: "A valorização da taxa de câmbio causada por um boom na exportação de um recurso natural, o que prejudica a competitividade de outros setores, como a indústria.", correta: true }, { texto: "Uma recessão prolongada causada pela falta de recursos naturais.", correta: false }, { texto: "A dependência excessiva de tecnologia importada da Holanda.", correta: false }, { texto: "Uma bolha especulativa no mercado imobiliário.", correta: false }], explicacao: "A doença holandesa ocorre quando a entrada maciça de divisas de um setor (ex: petróleo, minério) valoriza a moeda local, tornando os produtos industriais do país caros e não competitivos no mercado internacional, levando a um processo de desindustrialização." },
            { id: 208, type: 'CE', eixo: 2, enunciado: "O BNDES (Banco Nacional de Desenvolvimento Econômico e Social) tem um papel histórico no desenvolvimento produtivo brasileiro. Sua principal função é:", alternatives: [{ texto: "Atuar como um banco comercial, oferecendo contas correntes e cartões de crédito.", correta: false }, { texto: "Prover financiamento de longo prazo para investimentos em infraestrutura, indústria e inovação, atuando como o principal agente de política de investimento do governo.", correta: true }, { texto: "Controlar a taxa de juros básica da economia (Selic).", correta: false }, { texto: "Fiscalizar o sistema financeiro nacional.", correta: false }, { texto: "Executar a política de transferência de renda do governo.", correta: false }], explicacao: "O BNDES é um 'development bank' cuja missão é fomentar o desenvolvimento de longo prazo, financiando projetos que, por seu tamanho, risco ou prazo de maturação, não seriam facilmente financiados por bancos comerciais privados." },
            { id: 209, type: 'CE', eixo: 2, enunciado: "A Zona Franca de Manaus foi criada como uma política de desenvolvimento regional para a Amazônia. O modelo se baseia em:", alternatives: [{ texto: "Proibição de qualquer atividade industrial na região.", correta: false }, { texto: "Concessão de incentivos fiscais (redução ou isenção de impostos) para atrair indústrias, principalmente de montagem de produtos eletroeletrônicos.", correta: true }, { texto: "Exploração exclusiva de recursos minerais.", correta: false }, { texto: "Criação de uma grande área de livre comércio de produtos importados para pessoas físicas.", correta: false }, { texto: "Fomento ao agronegócio de larga escala.", correta: false }], explicacao: "O modelo da Zona Franca de Manaus é um polo industrial baseado em incentivos fiscais para importação de componentes e montagem de produtos finais, visando gerar emprego e renda em uma região economicamente isolada." },
            { id: 210, type: 'CE', eixo: 2, enunciado: "O conceito de 'cluster', popularizado por Michael Porter, é similar ao de APL, mas enfatiza mais fortemente:", alternatives: [{ texto: "A dependência de subsídios governamentais.", correta: false }, { texto: "A importância da competição acirrada entre as empresas do arranjo como um motor para a inovação e o aumento da produtividade.", correta: true }, { texto: "A cooperação total, com a eliminação da competição.", correta: false }, { texto: "A presença de empresas de um único setor, sem indústrias de apoio.", correta: false }, { texto: "O isolamento geográfico do resto do mundo.", correta: false }], explicacao: "Embora cooperação seja importante, a teoria dos clusters de Porter dá grande ênfase à rivalidade local. A competição intensa entre vizinhos força as empresas a inovarem e se tornarem mais eficientes, gerando vantagens competitivas que se projetam globalmente." },

            // Eixo 3 (10 questões)
            { id: 301, type: 'CE', eixo: 3, enunciado: "Uma agência reguladora que estabelece tetos de preços para telefonia móvel em um oligopólio atua para corrigir qual falha de mercado?", alternatives: [{ texto: "Externalidades negativas.", correta: false }, { texto: "Bens públicos.", correta: false }, { texto: "Assimetria de informação.", correta: false }, { texto: "Poder de mercado.", correta: true }, { texto: "Custos de transação elevados.", correta: false }], explicacao: "Oligopólios são uma falha de mercado onde o poder concentrado leva a preços acima do nível competitivo. A regulação de preços (price cap) visa mitigar essa falha." },
            { id: 302, type: 'CE', eixo: 3, enunciado: "O conceito de 'governança' na administração pública, em contraste com 'governo', implica:", alternatives: [{ texto: "A centralização de todas as decisões no Poder Executivo.", correta: false }, { texto: "Os processos e redes através dos quais o poder é exercido, envolvendo múltiplos atores estatais e não estatais.", correta: true }, { texto: "Exclusivamente a gestão de empresas estatais.", correta: false }, { texto: "A privatização de todos os serviços públicos.", correta: false }, { texto: "Um sinônimo para burocracia.", correta: false }], explicacao: "Governança é um conceito amplo que abrange a interação entre Estado, mercado e sociedade civil na resolução de problemas públicos, envolvendo participação, transparência e cooperação." },
            { id: 303, type: 'CE', eixo: 3, enunciado: "As Parcerias Público-Privadas (PPPs), reguladas no Brasil pela Lei nº 11.079/2004, são uma forma de:", alternatives: [{ texto: "Privatização completa de um serviço público.", correta: false }, { texto: "Contrato de longo prazo entre o setor público e o privado para a prestação de serviços públicos, onde o parceiro privado assume a responsabilidade por investimentos e operação, sendo remunerado pelo governo ou por tarifas.", correta: true }, { texto: "Contratação de consultoria de curto prazo pelo governo.", correta: false }, { texto: "Estatização de empresas privadas que atuam em serviços essenciais.", correta: false }, { texto: "Doação de empresas privadas para o governo.", correta: false }], explicacao: "As PPPs são arranjos contratuais complexos onde o setor privado financia, constrói e opera um ativo de infraestrutura ou serviço, compartilhando os riscos com o poder público. Diferem da privatização porque o ativo geralmente retorna ao Estado ao final do contrato." },
            { id: 304, type: 'CE', eixo: 3, enunciado: "O 'problema da captura' de uma agência reguladora ocorre quando:", alternatives: [{ texto: "A agência é extinta por falta de orçamento.", correta: false }, { texto: "A agência passa a defender os interesses das empresas que deveria regular, em vez do interesse público, devido à influência política ou econômica dessas empresas.", correta: true }, { texto: "A agência regula excessivamente o setor, inviabilizando a atividade econômica.", correta: false }, { texto: "Os consumidores processam a agência por não regular adequadamente.", correta: false }, { texto: "A agência é fundida com outra, perdendo sua autonomia.", correta: false }], explicacao: "A Teoria da Captura, de George Stigler, descreve o risco de que o regulador se torne tão próximo do setor regulado (pela troca de pessoal, lobby, etc.) que suas decisões acabam por beneficiar as empresas em detrimento da sociedade." },
            { id: 305, type: 'CE', eixo: 3, enunciado: "No planejamento estratégico governamental, a Matriz SWOT é uma ferramenta utilizada para:", alternatives: [{ texto: "Calcular o orçamento anual do órgão.", correta: false }, { texto: "Analisar o ambiente interno (Forças e Fraquezas) e o ambiente externo (Oportunidades e Ameaças) para a formulação de estratégias.", correta: true }, { texto: "Definir a estrutura hierárquica da organização.", correta: false }, { texto: "Monitorar o desempenho individual dos servidores.", correta: false }, { texto: "Gerenciar o fluxo de caixa diário.", correta: false }], explicacao: "A Matriz SWOT (Strengths, Weaknesses, Opportunities, Threats) é um instrumento clássico de análise de cenário que ajuda as organizações a entenderem suas capacidades internas e o contexto externo para tomar decisões estratégicas mais informadas." },
            { id: 306, type: 'CE', eixo: 3, enunciado: "O federalismo fiscal no Brasil é marcado por uma complexa distribuição de competências tributárias e de responsabilidades de gastos entre União, estados e municípios. Uma das principais tensões desse arranjo é:", alternatives: [{ texto: "A excessiva autonomia dos municípios para criar impostos.", correta: false }, { texto: "A concentração da arrecadação de impostos na União, enquanto estados e municípios possuem muitas responsabilidades por gastos, gerando dependência de transferências.", correta: true }, { texto: "A ausência de transferências de recursos entre os entes federativos.", correta: false }, { texto: "A simplicidade e clareza do sistema tributário nacional.", correta: false }, { texto: "A igualdade de capacidade de arrecadação entre todos os estados da federação.", correta: false }], explicacao: "O Brasil possui um federalismo fiscal desequilibrado. A União concentra a maior parte da receita tributária (Imposto de Renda, IPI), enquanto políticas públicas essenciais como saúde e educação são de responsabilidade compartilhada ou municipal, criando um 'desequilíbrio vertical'." },
            { id: 307, type: 'CE', eixo: 3, enunciado: "O conceito de 'accountability' no setor público refere-se à:", alternatives: [{ texto: "Capacidade de gastar todo o orçamento disponível.", correta: false }, { texto: "Obrigação que os gestores públicos têm de prestar contas de suas ações, e a possibilidade de serem responsabilizados por elas.", correta: true }, { texto: "Hierarquia rígida dentro da burocracia.", correta: false }, { texto: "Contratação de pessoal sem concurso público.", correta: false }, { texto: "Eficiência na arrecadação de impostos.", correta: false }], explicacao: "Accountability envolve não apenas a transparência (prestar contas), mas também a responsabilização (sofrer sanções ou recompensas) pelos resultados e pelo uso de recursos públicos. É um pilar da boa governança." },
            { id: 308, type: 'CE', eixo: 3, enunciado: "Qual o papel fundamental do Tribunal de Contas da União (TCU) no arranjo de governança brasileiro?", alternatives: [{ texto: "Julgar crimes comuns cometidos por cidadãos.", correta: false }, { texto: "Auxiliar o Congresso Nacional no exercício do controle externo, fiscalizando a legalidade, legitimidade e economicidade dos atos da administração pública federal.", correta: true }, { texto: "Formular o Orçamento Geral da União.", correta: false }, { texto: "Atuar como um banco de fomento para estados e municípios.", correta: false }, { texto: "Regular as tarifas de serviços públicos.", correta: false }], explicacao: "O TCU é o órgão de controle externo do Poder Executivo. Sua função, prevista na Constituição, é fiscalizar as contas públicas em nome do Poder Legislativo e da sociedade, verificando se o dinheiro público está sendo bem aplicado." },
            { id: 309, type: 'CE', eixo: 3, enunciado: "A 'assimetria de informação' é uma falha de mercado que justifica a regulação em setores como o de seguros e o de saúde. Ela ocorre quando:", alternatives: [{ texto: "Todas as partes têm a mesma informação.", correta: false }, { texto: "Uma das partes em uma transação (ex: o vendedor) tem mais ou melhor informação do que a outra (ex: o comprador).", correta: true }, { texto: "A informação é pública e gratuita para todos.", correta: false }, { texto: "Não há informação disponível sobre o produto.", correta: false }, { texto: "O governo proíbe a divulgação de informações.", correta: false }], explicacao: "A assimetria de informação pode levar a dois problemas clássicos: a 'seleção adversa' (antes do contrato) e o 'risco moral' (depois do contrato). A regulação (ex: exigência de divulgação de informações, padronização de contratos) visa mitigar esses problemas." },
            { id: 310, type: 'CE', eixo: 3, enunciado: "O Balanced Scorecard (BSC) é um modelo de gestão estratégica que propõe a medição de desempenho através de quatro perspectivas. Quais são elas?", alternatives: [{ texto: "Legal, Política, Social e Cultural.", correta: false }, { texto: "Financeira, Clientes, Processos Internos, e Aprendizado e Crescimento.", correta: true }, { texto: "Marketing, Vendas, Produção e Logística.", correta: false }, { texto: "Hierárquica, Funcional, Matricial e de Projetos.", correta: false }, { texto: "Curto Prazo, Médio Prazo, Longo Prazo e Orçamentária.", correta: false }], explicacao: "O BSC, criado por Kaplan e Norton, busca equilibrar os indicadores financeiros de curto prazo com os impulsionadores de desempenho de longo prazo, oferecendo uma visão mais completa e estratégica da organização." },

            // Eixo 4 (10 questões)
            { id: 401, type: 'CE', eixo: 4, enunciado: "O 'Milagre Econômico' brasileiro (1968-1973) gerou críticas significativas, principalmente relacionadas à:", alternatives: [{ texto: "Redução da dívida externa e controle da inflação.", correta: false }, { texto: "Concentração de renda e aumento da desigualdade social.", correta: true }, { texto: "Priorização do setor agrícola em detrimento da indústria.", correta: false }, { texto: "Implementação de um robusto sistema de proteção social.", correta: false }, { texto: "Forte retração do papel do Estado na economia.", correta: false }], explicacao: "Apesar do crescimento, o modelo do 'Milagre' foi marcado por arrocho salarial e ausência de mecanismos de distribuição, resultando em notável concentração de renda, como medido pelo Índice de Gini." },
            { id: 402, type: 'CE', eixo: 4, enunciado: "A Constituição de 1988 estabeleceu as bases para um Sistema de Seguridade Social que se apoia no tripé:", alternatives: [{ texto: "Educação, Cultura e Esporte.", correta: false }, { texto: "Saúde, Previdência Social e Assistência Social.", correta: true }, { texto: "Trabalho, Emprego e Renda.", correta: false }, { texto: "Desenvolvimento Agrário, Industrial e de Serviços.", correta: false }, { texto: "Segurança Pública, Defesa Nacional e Relações Exteriores.", correta: false }], explicacao: "O Art. 194 da CF define a Seguridade Social como um conjunto integrado de ações para assegurar os direitos à saúde (universal), previdência (contributiva) e assistência social (para quem necessitar)." },
            { id: 403, type: 'CE', eixo: 4, enunciado: "O Plano Real, implementado em 1994, foi um plano de estabilização econômica que teve como âncora principal:", alternatives: [{ texto: "O congelamento de preços e salários.", correta: false }, { texto: "Uma reforma fiscal profunda que zerou o déficit público imediatamente.", correta: false }, { texto: "A criação de uma nova moeda (o Real) atrelada a uma âncora cambial, com paridade inicial próxima de um para um com o dólar americano.", correta: true }, { texto: "A estatização do sistema bancário para controlar o crédito.", correta: false }, { texto: "Um grande programa de investimentos em infraestrutura financiado por emissão de moeda.", correta: false }], explicacao: "O sucesso do Plano Real em debelar a hiperinflação deveu-se, em grande parte, à âncora cambial, que estabilizou as expectativas de preços e permitiu a remonetização da economia de forma controlada." },
            { id: 404, type: 'CE', eixo: 4, enunciado: "O Plano de Metas do governo Juscelino Kubitschek (1956-1961) representou um esforço de planejamento estatal focado em:", alternatives: [{ texto: "Reforma agrária e agricultura familiar.", correta: false }, { texto: "Industrialização acelerada, com ênfase nos setores de energia, transportes, indústria de base e na construção de Brasília.", correta: true }, { texto: "Estabilidade monetária e controle da inflação a qualquer custo.", correta: false }, { texto: "Abertura comercial e liberalização financeira.", correta: false }, { texto: "Políticas sociais universais, como saúde e educação.", correta: false }], explicacao: "O Plano de Metas, com seu lema '50 anos em 5', foi um programa desenvolvimentista clássico, que utilizou o Estado como indutor de investimentos para aprofundar a industrialização brasileira, com destaque para a implantação da indústria automobilística." },
            { id: 405, type: 'CE', eixo: 4, enunciado: "A 'década perdida' de 1980, na América Latina e no Brasil, foi marcada por:", alternatives: [{ texto: "Altas taxas de crescimento e controle da inflação.", correta: false }, { texto: "Crise da dívida externa, estagnação econômica, hiperinflação e aumento da pobreza.", correta: true }, { texto: "Forte expansão do crédito e do consumo das famílias.", correta: false }, { texto: "Um período de grande estabilidade política e social.", correta: false }, { texto: "Investimentos maciços em infraestrutura e tecnologia.", correta: false }], explicacao: "A crise da dívida externa, deflagrada pelo México em 1982, levou à suspensão do crédito internacional para a região. Sem financiamento, o Brasil enfrentou uma década de baixo crescimento, inflação galopante e ajuste econômico doloroso." },
            { id: 406, type: 'CE', eixo: 4, enunciado: "O processo de industrialização da Era Vargas (1930-1945) teve como característica principal:", alternatives: [{ texto: "A dependência exclusiva do capital estrangeiro.", correta: false }, { texto: "O início da industrialização por substituição de importações, impulsionada pela crise de 1929 e com forte participação do Estado na criação de indústrias de base.", correta: true }, { texto: "O foco na produção de bens de consumo de alta tecnologia.", correta: false }, { texto: "A privatização de todas as empresas estatais existentes.", correta: false }, { texto: "A abertura total do mercado brasileiro para produtos importados.", correta: false }], explicacao: "A crise de 1929 reduziu a capacidade do Brasil de importar. Isso, somado à política nacionalista de Vargas, deu impulso à indústria nacional. O Estado passou a atuar diretamente, criando empresas como a CSN e a Vale do Rio Doce." },
            { id: 407, type: 'CE', eixo: 4, enunciado: "O 'tripé macroeconômico', adotado no Brasil a partir de 1999, consiste na combinação de quais políticas?", alternatives: [{ texto: "Desenvolvimentismo, protecionismo e emissão de moeda.", correta: false }, { texto: "Câmbio flutuante, metas de inflação e superávit primário (responsabilidade fiscal).", correta: true }, { texto: "Câmbio fixo, congelamento de preços e aumento de salários.", correta: false }, { texto: "Reforma agrária, industrialização e distribuição de renda.", correta: false }, { texto: "Privatizações, desregulamentação e abertura comercial.", correta: false }], explicacao: "Após a crise cambial de 1999, o Brasil abandonou a âncora cambial e adotou o regime de câmbio flutuante. Para garantir a estabilidade, implementou o sistema de metas de inflação (controlado pelo Banco Central) e a busca por superávits primários (economia do governo para pagar juros da dívida)." },
            { id: 408, type: 'CE', eixo: 4, enunciado: "A crise econômica brasileira de 2015-2016 foi caracterizada por uma combinação de fatores, incluindo:", alternatives: [{ texto: "Um boom nos preços das commodities e superávit nas contas externas.", correta: false }, { texto: "Queda acentuada do PIB, aumento da inflação e do desemprego, e deterioração das contas públicas.", correta: true }, { texto: "Uma forte valorização do Real e aumento do poder de compra da população.", correta: false }, { texto: "Redução da taxa de juros a níveis historicamente baixos.", correta: false }, { texto: "Um período de grande harmonia e estabilidade política.", correta: false }], explicacao: "A crise de 2015-2016 foi uma das mais severas da história recente do Brasil, combinando uma forte recessão econômica com uma crise fiscal (aumento do déficit público) e uma profunda crise política, resultando em dois anos consecutivos de queda do PIB." },
            { id: 409, type: 'CE', eixo: 4, enunciado: "O nacional-desenvolvimentismo foi uma corrente de pensamento e política econômica predominante no Brasil em meados do século XX. Sua principal tese era que:", alternatives: [{ texto: "O mercado, por si só, levaria o país ao desenvolvimento.", correta: false }, { texto: "O desenvolvimento exigia uma ação planejada e indutora do Estado, em aliança com a burguesia nacional, para promover a industrialização e superar o subdesenvolvimento.", correta: true }, { texto: "O Brasil deveria focar exclusivamente na agricultura de exportação.", correta: false }, { texto: "A integração total e sem restrições ao capital internacional era o caminho mais rápido para o crescimento.", correta: false }, { texto: "A inflação deveria ser combatida com políticas de austeridade fiscal e monetária.", correta: false }], explicacao: "O nacional-desenvolvimentismo, defendido por intelectuais como os do ISEB, via o Estado como o ator central capaz de superar os 'obstáculos' ao desenvolvimento, planejando investimentos e protegendo a indústria nascente para construir uma economia nacional autônoma." },
            { id: 410, type: 'CE', eixo: 4, enunciado: "O impacto da pandemia de COVID-19 na economia brasileira incluiu:", alternatives: [{ texto: "Uma redução drástica da dívida pública devido ao aumento da arrecadação.", correta: false }, { texto: "Uma forte queda na atividade econômica, aumento do desemprego e a necessidade de programas massivos de transferência de renda, como o Auxílio Emergencial.", correta: true }, { texto: "Um aumento na taxa de formalização do mercado de trabalho.", correta: false }, { texto: "A valorização do setor de turismo e serviços presenciais.", correta: false }, { texto: "A ausência de impacto no nível de preços (inflação).", correta: false }], explicacao: "A pandemia causou um choque simultâneo de oferta (paralisação de atividades) e de demanda. O governo reagiu com o Auxílio Emergencial para mitigar os efeitos sociais, o que, por outro lado, pressionou as contas públicas." },

            // Eixo 5 (10 questões)
            { id: 501, type: 'CE', eixo: 5, enunciado: "A 'uberização' do trabalho, do ponto de vista da estrutura socioeconômica, está associada a:", alternatives: [{ texto: "Um fortalecimento dos sindicatos e da legislação trabalhista.", correta: false }, { texto: "Uma transição para um modelo de pleno emprego.", correta: false }, { texto: "Uma precarização das relações de trabalho, com perda de direitos e transferência de riscos para o trabalhador.", correta: true }, { texto: "Uma redução drástica da desigualdade de renda.", correta: false }, { texto: "O resultado de políticas públicas focadas na formalização em massa.", correta: false }], explicacao: "A 'uberização' descreve a expansão do trabalho mediado por plataformas, criticado por mascarar uma relação de emprego sem as garantias correspondentes, levando à precarização." },
            { id: 502, type: 'CE', eixo: 5, enunciado: "O Índice de Gini é uma medida de desigualdade de renda. Um valor de 0 (zero) representa:", alternatives: [{ texto: "Desigualdade máxima, onde uma única pessoa detém toda a renda.", correta: false }, { texto: "Igualdade perfeita, onde todos os indivíduos têm a mesma renda.", correta: true }, { texto: "O ponto médio de desigualdade em uma sociedade.", correta: false }, { texto: "Um nível de pobreza de 50% da população.", correta: false }, { texto: "Um índice que não pode ser calculado para renda, apenas para riqueza.", correta: false }], explicacao: "O Coeficiente de Gini varia de 0 a 1. O valor 0 corresponde à igualdade perfeita de distribuição (todos têm a mesma renda), enquanto o valor 1 corresponde à desigualdade máxima (uma pessoa detém toda a renda)." },
            { id: 503, type: 'CE', eixo: 5, enunciado: "A transição demográfica é um processo em que uma sociedade passa de um regime de altas taxas de mortalidade e natalidade para um de baixas taxas. Qual é a principal consequência econômica da fase final desse processo?", alternatives: [{ texto: "Um rápido crescimento da população jovem.", correta: false }, { texto: "O envelhecimento da população, que gera desafios para os sistemas de previdência social e de saúde.", correta: true }, { texto: "Um aumento exponencial da taxa de natalidade.", correta: false }, { texto: "A erradicação de todas as doenças infecciosas.", correta: false }, { texto: "Uma redução da força de trabalho total.", correta: false }], explicacao: "Com a queda da natalidade e o aumento da expectativa de vida, a estrutura etária da população se altera, com uma proporção maior de idosos. Isso pressiona os sistemas de seguridade social, pois há menos contribuintes para cada aposentado." },
            { id: 504, type: 'CE', eixo: 5, enunciado: "A 'Curva de Lorenz' é uma representação gráfica utilizada para visualizar:", alternatives: [{ texto: "O crescimento do PIB ao longo do tempo.", correta: false }, { texto: "A distribuição de renda ou riqueza em uma população, comparando a distribuição real com uma linha de igualdade perfeita.", correta: true }, { texto: "A relação entre inflação e desemprego.", correta: false }, { texto: "A estrutura etária de uma população (pirâmide etária).", correta: false }, { texto: "A taxa de urbanização de um país.", correta: false }], explicacao: "A Curva de Lorenz plota a porcentagem acumulada da renda versus a porcentagem acumulada da população. Quanto mais a curva se afasta da linha diagonal de 45 graus (igualdade perfeita), maior é a desigualdade. O Índice de Gini é calculado a partir da área entre a linha de igualdade e a Curva de Lorenz." },
            { id: 505, type: 'CE', eixo: 5, enunciado: "No debate sobre desigualdades no Brasil, a diferença de rendimento entre homens e mulheres, mesmo quando exercem a mesma função, é um indicador de:", alternatives: [{ texto: "Igualdade de gênero no mercado de trabalho.", correta: false }, { texto: "Desigualdade de gênero, que pode ser explicada por fatores como discriminação, dupla jornada e segregação ocupacional.", correta: true }, { texto: "Maior produtividade média das mulheres.", correta: false }, { texto: "Preferências individuais que não têm relação com a estrutura social.", correta: false }, { texto: "Um fenômeno que já foi completamente superado.", correta: false }], explicacao: "A persistência do hiato salarial de gênero, mesmo controlando por fatores como educação e horas trabalhadas, aponta para a existência de barreiras estruturais e discriminação que afetam a remuneração das mulheres no mercado de trabalho." },
            { id: 506, type: 'CE', eixo: 5, enunciado: "O mercado de trabalho informal no Brasil é caracterizado por:", alternatives: [{ texto: "Trabalhadores com carteira assinada e todos os direitos garantidos.", correta: false }, { texto: "Relações de trabalho não protegidas pela legislação trabalhista e previdenciária, como trabalhadores por conta própria ou sem carteira.", correta: true }, { texto: "Apenas funcionários públicos.", correta: false }, { texto: "Um setor em declínio, que praticamente não existe mais.", correta: false }, { texto: "Altos salários e grande estabilidade.", correta: false }], explicacao: "A informalidade é uma característica estrutural do mercado de trabalho brasileiro. Ela abrange uma vasta gama de ocupações sem proteção legal, o que deixa os trabalhadores mais vulneráveis a flutuações econômicas e sem acesso a benefícios como aposentadoria e seguro-desemprego." },
            { id: 507, type: 'CE', eixo: 5, enunciado: "O conceito de 'mobilidade social' refere-se à:", alternatives: [{ texto: "Capacidade de se deslocar fisicamente entre cidades e estados.", correta: false }, { texto: "Mudança de posição de um indivíduo ou grupo na estrutura de estratificação social ao longo do tempo.", correta: true }, { texto: "Estagnação, onde ninguém muda de classe social.", correta: false }, { texto: "Adoção de novas tecnologias pela sociedade.", correta: false }, { texto: "Participação em movimentos sociais.", correta: false }], explicacao: "A mobilidade social pode ser intergeracional (comparando a posição dos filhos com a dos pais) ou intrageracional (ao longo da vida de um mesmo indivíduo). Sociedades com alta mobilidade são consideradas mais abertas e com maior igualdade de oportunidades." },
            { id: 508, type: 'CE', eixo: 5, enunciado: "A 'pobreza multidimensional' é uma abordagem que mede a pobreza considerando não apenas a falta de renda, mas também:", alternatives: [{ texto: "O número de bens de luxo que uma pessoa possui.", correta: false }, { texto: "Privações em múltiplas dimensões, como saúde, educação e condições de moradia.", correta: true }, { texto: "A distância da capital do país.", correta: false }, { texto: "Apenas o nível de felicidade subjetiva.", correta: false }, { texto: "O tipo de emprego, se formal ou informal.", correta: false }], explicacao: "O Índice de Pobreza Multidimensional (IPM) complementa as medidas baseadas em renda, argumentando que a pobreza é a privação de capacidades básicas. Ele analisa indicadores como nutrição, mortalidade infantil, anos de escolaridade, saneamento, água potável, etc." },
            { id: 509, type: 'CE', eixo: 5, enunciado: "Qual a principal característica da estrutura fundiária brasileira, que tem profundas implicações para a desigualdade socioeconômica?", alternatives: [{ texto: "A predominância de pequenas propriedades familiares bem distribuídas.", correta: false }, { texto: "Uma alta concentração da posse da terra, com grandes latifúndios coexistindo com um grande número de pequenos produtores e trabalhadores sem terra.", correta: true }, { texto: "A ausência de conflitos por terra no campo.", correta: false }, { texto: "A totalidade das terras pertence ao Estado.", correta: false }, { texto: "Uma reforma agrária ampla e bem-sucedida, realizada no século XX.", correta: false }], explicacao: "A concentração de terras é uma marca histórica do Brasil, desde as sesmarias coloniais. Essa estrutura gera desigualdade de riqueza e poder no campo, além de ser fonte de contínuos conflitos sociais." },
            { id: 510, type: 'CE', eixo: 5, enunciado: "A 'janela de oportunidade demográfica' (ou bônus demográfico) ocorre quando:", alternatives: [{ texto: "A população de idosos supera a de jovens.", correta: false }, { texto: "A proporção da população em idade ativa (trabalhando e contribuindo) é relativamente maior do que a proporção de dependentes (crianças e idosos).", correta: true }, { texto: "A taxa de natalidade atinge seu pico histórico.", correta: false }, { texto: "A população total do país começa a diminuir.", correta: false }, { texto: "O governo oferece bônus financeiros para famílias com muitos filhos.", correta: false }], explicacao: "O bônus demográfico é um período temporário favorável ao crescimento econômico, pois há mais 'braços' para produzir do que 'bocas' para sustentar. O Brasil está atualmente no final de sua janela de oportunidade, que precisa ser aproveitada com investimentos em educação e emprego." },
        ];
        const eixos = [ { id: 1, nome: "Desenvolvimento, sustentabilidade e inclusão" }, { id: 2, nome: "Desenvolvimento produtivo e regional" }, { id: 3, nome: "Gestão estratégica e regulação" }, { id: 4, nome: "Desenvolvimento socioeconômico no Brasil" }, { id: 5, nome: "Desigualdades e dinâmicas socioeconômicas" }, ];
        const cronogramaCompleto = [ { semana: 1, dia: 'Segunda', data: '2025-08-11', eixo: 1, topico: "Teorias do desenvolvimento econômico" }, { semana: 1, dia: 'Terça', data: '2025-08-12', eixo: 2, topico: "Teorias de localização e desenvolvimento regional" }, { semana: 1, dia: 'Quarta', data: '2025-08-13', eixo: 3, topico: "Planejamento e gestão estratégica" }, { semana: 1, dia: 'Quinta', data: '2025-08-14', eixo: 4, topico: "Liberalismo econômico e nacional-desenvolvimentismo" }, { semana: 1, dia: 'Sexta', data: '2025-08-15', eixo: 5, topico: "Dinâmica e estrutura demográfica" }, { semana: 1, dia: 'Sábado', data: '2025-08-16', eixo: 'todos', topico: "Simulado completo (50 questões)" }, { semana: 2, dia: 'Segunda', data: '2025-08-18', eixo: 1, topico: "Teorias da CEPAL e Celso Furtado" }, { semana: 2, dia: 'Terça', data: '2025-08-19', eixo: 2, topico: "Nova Geografia Econômica" }, { semana: 2, dia: 'Quarta', data: '2025-08-20', eixo: 3, topico: "Análise de cenários e gestão de riscos" }, { semana: 2, dia: 'Quinta', data: '2025-08-21', eixo: 4, topico: "Era Vargas e industrialização" }, { semana: 2, dia: 'Sexta', data: '2025-08-22', eixo: 5, topico: "Desigualdade de renda e riqueza" }, { semana: 2, dia: 'Domingo', data: '2025-08-24', eixo: 'todos', topico: "Simulado + revisão" }, { semana: 3, dia: 'Segunda', data: '2025-08-25', eixo: 1, topico: "Modelos de substituição de importações" }, { semana: 3, dia: 'Terça', data: '2025-08-26', eixo: 2, topico: "Indústria e sistemas de inovação" }, { semana: 3, dia: 'Quarta', data: '2025-08-27', eixo: 3, topico: "Governança e arranjos federativos" }, { semana: 3, dia: 'Quinta', data: '2025-08-28', eixo: 4, topico: "Ditadura militar e desenvolvimento" }, { semana: 3, dia: 'Sexta', data: '2025-08-29', eixo: 5, topico: "Sistema de proteção social pós-1988" }, { semana: 3, dia: 'Sábado', data: '2025-08-30', eixo: 'todos', topico: "Simulado intensivo (tempo reduzido)" }, { semana: 4, dia: 'Segunda', data: '2025-09-01', eixo: 1, topico: "Desenvolvimento sustentável e ODS" }, { semana: 4, dia: 'Terça', data: '2025-09-02', eixo: 2, topico: "Políticas de desenvolvimento regional século XXI" }, { semana: 4, dia: 'Quarta', data: '2025-09-03', eixo: 3, topico: "Falhas de mercado e regulação" }, { semana: 4, dia: 'Quinta', data: '2025-09-04', eixo: 4, topico: "Crises 2015-2016 e COVID-19" }, { semana: 4, dia: 'Sexta', data: '2025-09-05', eixo: 5, topico: "Mercado de trabalho contemporâneo" }, { semana: 4, dia: 'Domingo', data: '2025-09-07', eixo: 'todos', topico: "Simulado final preparatório" },];
        const bibliografia = [ 
            { 
                id: 'furtado-2005',
                autor: "Celso Furtado", 
                obra: "Formação Econômica do Brasil", 
                resumo: "Análise clássica sobre as raízes históricas do subdesenvolvimento brasileiro, focando na economia primário-exportadora.",
                eixos: [1, 2, 4, 5],
                conceitos: ["Subdesenvolvimento", "Centro-periferia", "Industrialização por Substituição de Importações (ISI)", "Economia Colonial", "Ciclo do Açúcar", "Ciclo do Ouro", "Economia Cafeeira"]
            },
            { autor: "Bresser-Pereira", obra: "Desenvolvimento e Crise no Brasil", resumo: "Examina os ciclos de desenvolvimento e as crises econômicas brasileiras, com foco no papel do Estado e da industrialização." }, 
            { autor: "José Eli da Veiga", obra: "Desenvolvimento Sustentável", resumo: "Introdução ao conceito de desenvolvimento sustentável e seus desafios, criticando a visão puramente economicista." }, 
            { autor: "Marcio Pochmann", obra: "Nova Classe Média?", resumo: "Debate sobre as transformações sociais no Brasil nos anos 2000 e a real consistência da emergência de uma 'nova classe média'." }, 
            { autor: "Ricardo Bielschowsky", obra: "Pensamento Econômico Brasileiro", resumo: "Coletânea essencial que mapeia as diferentes correntes do pensamento econômico no Brasil, do liberalismo ao desenvolvimentismo." },
        ];
        const fontes = [ { nome: "Ministério do Desenvolvimento Regional", link: "https://www.gov.br/mdr/pt-br" }, { nome: "Relatórios do IPEA", link: "https://www.ipea.gov.br/portal/" }, { nome: "Publicações da CEPAL", link: "https://www.cepal.org/pt-br" }, { nome: "Dados do IBGE", link: "https://www.ibge.gov.br/" }, { nome: "Agências Reguladoras (Consulta)", link: "https://www.planalto.gov.br/ccivil_03/consulta_publica/agencias_reguladoras.htm" },];
        const documentosAnalisados = [
            {
                id: 'guia-estudo-01',
                titulo: "Guia de Estudo: Economia Brasileira - Primeiros Séculos até a Crise da Dívida",
                autor: "Material de Apoio",
                data: "2024-08-19",
                relevancia: {
                    eixos: [1, 4, 5],
                    conceitos: ["Economia Colonial", "Ciclo do Açúcar", "Crise do Encilhamento", "Convênio de Taubaté", "Crise de 1929", "Governo Vargas", "Governo Dutra", "Milagre Econômico", "Crise da Dívida"]
                },
                conteudo: {
                    resumo: "Este guia aborda a evolução da economia brasileira desde seus pilares coloniais (latifúndio, monocultura, trabalho escravo) até as grandes crises e planos de desenvolvimento do século XX, como o Encilhamento, o Convênio de Taubaté, a crise de 1929, o PSI, o Milagre Econômico e a Crise da Dívida Externa.",
                    perguntas: [
                        { q: "Explique a diferença fundamental entre 'Economia Brasileira' e 'História da Economia do Brasil' conforme o material.", a: "Economia Brasileira foca na relação entre variáveis econômicas (PIB, inflação), enquanto a História da Economia do Brasil se concentra mais nos líderes e eventos históricos." },
                        { q: "Quais foram os três principais elementos estruturais da economia colonial brasileira?", a: "Os três elementos foram monocultura, trabalho escravo e latifúndio (grandes propriedades)." },
                        { q: "Qual foi o principal fator para o declínio do ciclo do açúcar no Brasil?", a: "Foi a quebra do monopólio português devido à apropriação do conhecimento de produção pelos holandeses, que geraram concorrência nas Antilhas." },
                    ],
                    glossario: [
                        { termo: "Crise do Encilhamento", definicao: "Bolha especulativa e crise econômica no Brasil no final do século XIX, resultante da expansão desenfreada de crédito e emissão monetária." },
                        { termo: "Convênio de Taubaté (1906)", definicao: "Acordo entre estados produtores de café e o governo federal para intervir no mercado do café, comprando excedentes e controlando preços." },
                        { termo: "Industrialização por Substituição de Importações (ISI)", definicao: "Estratégia de desenvolvimento econômico que visa a produção interna de bens que antes eram importados." },
                    ]
                }
            },
            {
                id: 'nivelamento-financas-01',
                titulo: "Nivelamento em Finanças e Fluxo de Caixa",
                autor: "Material de Apoio (Prof. Paulo Portinho)",
                data: "2024-08-20",
                relevancia: {
                    eixos: [3],
                    conceitos: ["Fluxo de Caixa", "VPL", "TIR", "Valuation", "Contabilidade", "Balanço Patrimonial", "DRE", "Custo de Oportunidade", "Taxa Livre de Risco"]
                },
                conteudo: {
                    resumo: "Este documento oferece um nivelamento essencial em finanças privadas, abordando conceitos cruciais para a avaliação de ativos e projetos de investimento. Cobre desde taxas de juros e regimes de capitalização até a análise de demonstrativos contábeis (Balanço Patrimonial, DRE) e as principais ferramentas de valuation, como Valor Presente Líquido (VPL) e Taxa Interna de Retorno (TIR).",
                    perguntas: [
                        { q: "Qual a principal diferença entre a Taxa Interna de Retorno (TIR) e o Valor Presente Líquido (VPL)?", a: "O VPL calcula o excedente monetário de um projeto descontado por uma taxa mínima de atratividade (TMA), enquanto a TIR é a taxa que zera o VPL. O VPL é considerado superior, pois não pressupõe o reinvestimento dos fluxos à própria TIR." },
                        { q: "O que é o EBITDA (ou LAJIDA) e por que ele é importante na análise financeira?", a: "EBITDA é o Lucro antes dos Juros, Impostos, Depreciação e Amortização. Ele representa a geração de caixa operacional da empresa, sendo um indicador importante para avaliar a performance do negócio independentemente de sua estrutura de capital e política de impostos." },
                    ],
                    glossario: [
                        { termo: "Valor Presente Líquido (VPL)", definicao: "Soma dos fluxos de caixa futuros de um projeto, descontados a uma taxa de custo de capital, subtraindo o investimento inicial. Se positivo, o projeto cria valor." },
                        { termo: "Taxa Interna de Retorno (TIR)", definicao: "A taxa de desconto que torna o VPL de um projeto igual a zero. Representa a rentabilidade intrínseca do investimento." },
                        { termo: "Custo de Oportunidade", definicao: "O retorno do melhor investimento alternativo que se abre mão ao escolher um determinado projeto." },
                    ]
                }
            }
        ];

        // --- LÓGICA DO APLICATIVO ---
        const getTodayString = () => { const today = new Date(); today.setHours(0, 0, 0, 0); return today.toISOString().split('T')[0]; }
        const calculateSrs = (srsData, quality) => { let { repetitions, easeFactor, interval } = srsData; if (quality < 3) { repetitions = 0; interval = 1; } else { repetitions += 1; easeFactor = easeFactor + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02)); if (easeFactor < 1.3) easeFactor = 1.3; if (repetitions === 1) { interval = 1; } else if (repetitions === 2) { interval = 6; } else { interval = Math.ceil(interval * easeFactor); } } const nextReviewDate = new Date(); nextReviewDate.setDate(nextReviewDate.getDate() + interval); return { repetitions, easeFactor, interval, nextReviewDate: nextReviewDate.toISOString().split('T')[0], }; };
        const shuffleArray = (array) => { let currentIndex = array.length, randomIndex; while (currentIndex !== 0) { randomIndex = Math.floor(Math.random() * currentIndex); currentIndex--; [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]]; } return array; };

        function App() {
            const [paginaAtiva, setPaginaAtiva] = useState('dashboard');
            const [simuladoConfig, setSimuladoConfig] = useState(null);
            const [historico, setHistorico] = useState([]);
            const [questoesMarcadas, setQuestoesMarcadas] = useState({});
            const [isLoading, setIsLoading] = useState(true);
            const [userName, setUserName] = useState(null);
            const [userId, setUserId] = useState(null);
            const [userDocRef, setUserDocRef] = useState(null);
            const [showUnlockMessage, setShowUnlockMessage] = useState(false);

            useEffect(() => {
                const savedUser = localStorage.getItem("cnu-user");
                if (savedUser) {
                    const user = JSON.parse(savedUser);
                    setUserName(user.name);
                    setUserId(user.id);
                } else {
                    setIsLoading(false);
                }
            }, []);

            useEffect(() => {
                if (!userId || !db) return;
                setIsLoading(true);
                const docRef = doc(db, "userProgress", userId);
                setUserDocRef(docRef);
                const unsubscribe = onSnapshot(docRef, (docSnap) => {
                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        setHistorico(data.historico || []);
                        setQuestoesMarcadas(data.questoesMarcadas || {});
                    } else {
                        setDoc(docRef, { historico: [], questoesMarcadas: {} });
                    }
                    setIsLoading(false);
                }, (error) => {
                    console.error("Erro ao buscar dados do Firebase:", error);
                    setIsLoading(false);
                });
                return () => unsubscribe();
            }, [userId]);

            const handleLogin = (name) => {
                const id = name.trim().toLowerCase().replace(/\s+/g, '-');
                const user = { name, id };
                localStorage.setItem("cnu-user", JSON.stringify(user));
                setUserName(user.name);
                setUserId(user.id);
            };
            
            const handleLogout = () => {
                localStorage.removeItem("cnu-user");
                setUserName(null);
                setUserId(null);
                setUserDocRef(null);
                setHistorico([]);
                setQuestoesMarcadas({});
            };

            const iniciarSimulado = (questoesDoSimulado, eixoId, tipo = 'normal') => {
                 setSimuladoConfig({
                    questoes: shuffleArray(questoesDoSimulado).map(q => ({ ...q, alternatives: shuffleArray([...q.alternatives]) })),
                    eixoId: eixoId,
                    tipo: tipo
                });
                setPaginaAtiva('simulado');
            };

            const iniciarSimuladoPadrao = (eixoId, numQuestoes) => {
                let questoesDisponiveis = [];
                const marcadasIds = Object.keys(questoesMarcadas);
                const marcadasDoEixo = marcadasIds.map(id => questoes.find(q => q.id == id)).filter(q => q && (eixoId === 'todos' || q.eixo === eixoId));
                questoesDisponiveis.push(...marcadasDoEixo);
                let outrasQuestoes = (eixoId === 'todos') ? questoes.filter(q => q.type === 'CE' && !marcadasIds.includes(String(q.id))) : questoes.filter(q => q.eixo === eixoId && !marcadasIds.includes(String(q.id)));
                questoesDisponiveis.push(...shuffleArray(outrasQuestoes));
                const questoesSelecionadas = [...new Map(questoesDisponiveis.map(item => [item['id'], item])).values()].slice(0, numQuestoes);
                iniciarSimulado(questoesSelecionadas, eixoId, 'padrao');
            };
            
            const iniciarSimuladoCompleto = () => {
                const cgQuestoes = shuffleArray(questoes.filter(q => q.type === 'CG')).slice(0, 30);
                const ceQuestoes = shuffleArray(questoes.filter(q => q.type === 'CE')).slice(0, 60);
                const fullSimuladoQuestoes = [...cgQuestoes, ...ceQuestoes];
                iniciarSimulado(fullSimuladoQuestoes, 'todos', 'completo');
            };

            const iniciarSimuladoRevisao = () => {
                const hoje = getTodayString();
                const questoesSelecionadas = Object.keys(questoesMarcadas)
                    .filter(id => new Date(questoesMarcadas[id].nextReviewDate) <= new Date(hoje))
                    .map(id => questoes.find(q => q.id == id) || {id: id, enunciado: "Questão não encontrada"})
                    .filter(Boolean);
                iniciarSimulado(questoesSelecionadas, null, 'revisao');
            };

            const finalizarSimulado = async (resultado) => {
                const newHistorico = [...historico, resultado];
                const newQuestoesMarcadas = { ...questoesMarcadas };
                let hasNewMarked = false;
                for (const qId in resultado.respostas) {
                    if (!resultado.respostas[qId].acertou && !newQuestoesMarcadas[qId]) {
                        const tomorrow = new Date();
                        tomorrow.setDate(tomorrow.getDate() + 1);
                        newQuestoesMarcadas[qId] = { repetitions: 0, easeFactor: 2.5, interval: 1, nextReviewDate: tomorrow.toISOString().split('T')[0] };
                        hasNewMarked = true;
                    }
                }

                if (!userDocRef) { 
                    setHistorico(newHistorico); 
                    if(hasNewMarked) setQuestoesMarcadas(newQuestoesMarcadas);
                    setPaginaAtiva('resultado'); 
                    return; 
                }
                try { 
                    await setDoc(userDocRef, { historico: newHistorico, questoesMarcadas: newQuestoesMarcadas }, { merge: true }); 
                    setPaginaAtiva('resultado'); 
                } catch (error) { 
                    console.error("Erro ao salvar resultado no Firebase:", error); 
                    setHistorico(newHistorico); 
                    if(hasNewMarked) setQuestoesMarcadas(newQuestoesMarcadas);
                    setPaginaAtiva('resultado'); 
                }
            };
            
            const toggleMarcarQuestao = async (id) => {
                const newQuestoesMarcadas = { ...questoesMarcadas };
                if (newQuestoesMarcadas[id]) { delete newQuestoesMarcadas[id]; } else { const tomorrow = new Date(); tomorrow.setDate(tomorrow.getDate() + 1); newQuestoesMarcadas[id] = { repetitions: 0, easeFactor: 2.5, interval: 1, nextReviewDate: tomorrow.toISOString().split('T')[0], }; }
                if (!userDocRef) { setQuestoesMarcadas(newQuestoesMarcadas); return; }
                try { await setDoc(userDocRef, { questoesMarcadas: newQuestoesMarcadas }, { merge: true }); } catch (error) { console.error("Erro ao salvar questão marcada no Firebase:", error); setQuestoesMarcadas(newQuestoesMarcadas); }
            };

            const atualizarQuestaoRevisada = async (id, quality) => {
                const srsData = questoesMarcadas[id];
                if (!srsData) return;
                const newSrsData = calculateSrs(srsData, quality);
                const newQuestoesMarcadas = { ...questoesMarcadas, [id]: newSrsData };
                if (!userDocRef) { setQuestoesMarcadas(newQuestoesMarcadas); return; }
                try { await setDoc(userDocRef, { questoesMarcadas: newQuestoesMarcadas }, { merge: true }); } catch (error) { console.error("Erro ao atualizar SRS da questão:", error); setQuestoesMarcadas(newQuestoesMarcadas); }
            };
            
            if (!userName) {
                return <LoginScreen onLogin={handleLogin} />;
            }

            const renderizarPagina = () => {
                if (isLoading) return <div className="text-center p-10"><div className="loader mx-auto"></div><p className="mt-4">Carregando seus dados...</p></div>;
                if (!db) return <div className="text-center p-10 bg-red-100 text-red-700 rounded-lg"><h3 className="font-bold">Falha na Conexão</h3><p>Não foi possível conectar ao Firebase. Verifique se as chaves de configuração estão corretas no código.</p></div>;

                switch (paginaAtiva) {
                case 'dashboard': return <Dashboard iniciarSimuladoPadrao={iniciarSimuladoPadrao} iniciarSimuladoCompleto={iniciarSimuladoCompleto} iniciarSimuladoRevisao={iniciarSimuladoRevisao} historico={historico} questoesMarcadas={questoesMarcadas} userName={userName} showUnlockMessage={showUnlockMessage} setShowUnlockMessage={setShowUnlockMessage} />;
                case 'simulado': return <SimuladoController config={simuladoConfig} finalizarSimulado={finalizarSimulado} questoesMarcadas={Object.keys(questoesMarcadas)} toggleMarcarQuestao={toggleMarcarQuestao} atualizarQuestaoRevisada={atualizarQuestaoRevisada} />;
                case 'resultado': return <ResultadoSimulado resultado={historico.length > 0 ? historico[historico.length - 1] : null} setPaginaAtiva={setPaginaAtiva} />;
                case 'metricas': return <Metricas historico={historico} />;
                case 'cronograma': return <CronogramaView />;
                case 'biblioteca': return <Biblioteca />;
                default: return <Dashboard iniciarSimuladoPadrao={iniciarSimuladoPadrao} iniciarSimuladoCompleto={iniciarSimuladoCompleto} iniciarSimuladoRevisao={iniciarSimuladoRevisao} historico={historico} questoesMarcadas={questoesMarcadas} userName={userName} showUnlockMessage={showUnlockMessage} setShowUnlockMessage={setShowUnlockMessage} />;
                }
            };

            return (
                <div className="bg-slate-100 min-h-screen font-sans">
                    <div className="bg-white shadow-md sticky top-0 z-10">
                        <header className="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                            <div className="flex items-center">
                                <BrazilFlagIcon />
                                <h1 className="text-xl sm:text-2xl font-bold text-slate-800">CNU 2025 | Bloco 6</h1>
                            </div>
                            <div className="flex items-center space-x-4">
                                <span className="hidden sm:inline text-sm text-slate-600">Usuário: <span className="font-bold text-slate-800">{userName}</span></span>
                                <button onClick={handleLogout} title="Trocar de usuário" className="text-slate-500 hover:text-red-600 transition-colors duration-200">
                                    <LogoutIcon />
                                </button>
                            </div>
                        </header>
                        <Nav setPaginaAtiva={setPaginaAtiva} paginaAtiva={paginaAtiva} />
                    </div>
                    <main className="container mx-auto p-4 sm:p-6 lg:p-8">{renderizarPagina()}</main>
                    <footer className="text-center text-xs text-slate-500 py-4">
                        Plataforma de Estudos CNU 2025
                    </footer>
                </div>
            );
        }

        function LoginScreen({ onLogin }) {
            const [name, setName] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (name.trim()) {
                    onLogin(name.trim());
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center bg-slate-100 p-4">
                    <div className="bg-white p-8 rounded-xl shadow-2xl max-w-md w-full text-center transform hover:scale-105 transition-transform duration-300">
                        <div className="flex justify-center items-center mb-4">
                            <BrazilFlagIcon />
                            <h1 className="text-2xl font-bold text-slate-800">Preparação CNU 2025</h1>
                        </div>
                        <p className="text-slate-600 mb-8">Plataforma de Estudos para o Bloco 6</p>
                        <form onSubmit={handleSubmit}>
                            <label htmlFor="name" className="block text-sm font-medium text-slate-700 text-left mb-2">
                                Para começar, digite seu nome:
                            </label>
                            <input
                                type="text"
                                id="name"
                                value={name}
                                onChange={(e) => setName(e.target.value)}
                                className="w-full px-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"
                                placeholder="Seu nome ou apelido"
                                required
                            />
                            <button
                                type="submit"
                                className="w-full mt-6 bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300 transform hover:translate-y-[-2px] shadow-lg"
                            >
                                Iniciar Estudos
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        function Nav({ setPaginaAtiva, paginaAtiva }) {
            const navItems = [ { id: 'dashboard', label: 'Painel', icon: <HomeIcon /> }, { id: 'metricas', label: 'Minhas Métricas', icon: <ChartBarIcon /> }, { id: 'cronograma', label: 'Cronograma', icon: <CalendarIcon /> }, { id: 'biblioteca', label: 'Biblioteca', icon: <BookOpenIcon /> }, ];
            return ( <nav className="bg-slate-50 border-b border-t border-slate-200"><div className="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center overflow-x-auto">{navItems.map(item => (<button key={item.id} onClick={() => setPaginaAtiva(item.id)} className={`flex-shrink-0 flex items-center px-4 py-3 text-sm font-semibold border-b-2 transition-colors duration-200 ${paginaAtiva === item.id ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-slate-600 hover:text-indigo-600 hover:border-slate-300'}`}>{item.icon}{item.label}</button>))}</div></nav> );
        }

        function Dashboard({ iniciarSimuladoPadrao, iniciarSimuladoCompleto, iniciarSimuladoRevisao, historico, questoesMarcadas, userName, showUnlockMessage, setShowUnlockMessage }) {
            const hoje = getTodayString();
            const tarefaDeHoje = cronogramaCompleto.find(c => c.data === hoje);
            const totalAcertos = historico.reduce((acc, curr) => acc + curr.acertos, 0);
            const totalQuestoes = historico.reduce((acc, curr) => acc + curr.questoes.length, 0);
            const percAcertoGeral = totalQuestoes > 0 ? ((totalAcertos / totalQuestoes) * 100).toFixed(1) : 'N/A';
            const questoesParaRevisarHoje = Object.values(questoesMarcadas).filter(q => new Date(q.nextReviewDate) <= new Date(hoje)).length;
            
            const simuladoPadraoHistory = historico.filter(h => h.tipo === 'padrao' && h.eixoId === 'todos');
            const isCompletoUnlocked = simuladoPadraoHistory.some(h => (h.acertos / h.questoes.length) >= 0.51);

            const handleCompletoClick = () => {
                if(isCompletoUnlocked) {
                    iniciarSimuladoCompleto();
                } else {
                    setShowUnlockMessage(true);
                    setTimeout(() => setShowUnlockMessage(false), 5000);
                }
            };

            return (
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div className="lg:col-span-2 space-y-6">
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                    <h2 className="text-2xl font-bold text-slate-800 mb-1">Olá, {userName}!</h2>
                    <p className="text-slate-600">Sua meta para hoje ({new Date().toLocaleDateString('pt-BR')}):</p>
                    {tarefaDeHoje ? (
                        <div className="mt-4 bg-indigo-50 border border-indigo-200 p-4 rounded-lg">
                        <p className="font-semibold text-indigo-800">Eixo {tarefaDeHoje.eixo}: {eixos.find(e => e.id === tarefaDeHoje.eixo)?.nome || "Revisão Geral"}</p>
                        <p className="text-indigo-700 mt-1">Tópico: {tarefaDeHoje.topico}</p>
                        <div className="flex items-center mt-4 space-x-2"><button onClick={() => iniciarSimuladoPadrao(tarefaDeHoje.eixo, tarefaDeHoje.eixo === 'todos' ? 50 : 10)} className="flex-grow bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow hover:shadow-lg">Iniciar Estudo do Dia</button></div>
                        </div>
                    ) : <p className="mt-4 text-slate-700 font-semibold">Nenhuma tarefa agendada para hoje. Aproveite para revisar!</p>}
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                    <h3 className="text-xl font-bold text-slate-800 mb-4">Simulados por Eixo</h3>
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">{eixos.map(eixo => (<div key={eixo.id} className="flex items-center space-x-2 p-3 bg-slate-50 rounded-lg border border-slate-200 hover:border-indigo-400 hover:bg-indigo-50 transition-all duration-200"><button onClick={() => iniciarSimuladoPadrao(eixo.id, 10)} className="flex-grow text-left"><p className="font-semibold text-slate-700">Eixo {eixo.id}</p><p className="text-sm text-slate-600">{eixo.nome}</p></button></div>))}</div>
                    </div>
                </div>
                <div className="space-y-6">
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <div className="flex items-center mb-4"><BrainIcon className="text-purple-600" /><h3 className="text-lg font-bold text-slate-800 ml-2">Revisão Inteligente</h3></div>
                        <p className="text-sm text-slate-600 mb-4">Você tem <span className="font-bold text-indigo-600">{questoesParaRevisarHoje}</span> questões para revisar hoje.</p>
                        <button onClick={iniciarSimuladoRevisao} disabled={questoesParaRevisarHoje === 0} className="w-full bg-purple-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors duration-200 shadow hover:shadow-lg disabled:bg-slate-400 disabled:cursor-not-allowed disabled:shadow-none">Iniciar Revisão</button>
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h3 className="text-lg font-bold text-slate-800 mb-4">Simulado Padrão</h3>
                        <div className="flex items-center mt-4 space-x-2"><button onClick={() => iniciarSimuladoPadrao('todos', 50)} className="w-full bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 transition-colors duration-200 shadow hover:shadow-lg">Iniciar Simulado (50Q)</button></div>
                    </div>
                     <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h3 className="text-lg font-bold text-slate-800 mb-4">Simulado Completo</h3>
                        <div className="relative">
                            <button onClick={handleCompletoClick} disabled={!isCompletoUnlocked} className="w-full flex items-center justify-center bg-rose-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-rose-700 transition-colors duration-200 shadow hover:shadow-lg disabled:bg-slate-400 disabled:cursor-not-allowed disabled:shadow-none">
                                {!isCompletoUnlocked && <LockClosedIcon />}
                                Simulado Avançado (90Q)
                            </button>
                            {showUnlockMessage && (
                                <div className="mt-2 text-sm text-rose-700 bg-rose-100 p-3 rounded-lg">
                                    Para liberar o Simulado Completo, você precisa realizar primeiro o Simulado Padrão e atingir pelo menos 51% de acertos.
                                </div>
                            )}
                        </div>
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h3 className="text-lg font-bold text-slate-800 mb-4">Desempenho Geral</h3>
                        <div className="text-center"><div className="text-4xl font-bold text-indigo-600">{percAcertoGeral}%</div><div className="text-sm text-slate-500">de acerto</div></div>
                        <div className="mt-4 text-center"><p className="text-sm">Total de questões resolvidas: <span className="font-bold">{totalQuestoes}</span></p></div>
                    </div>
                </div>
                </div>
            );
        }
        
        function SimuladoController({ config, finalizarSimulado, questoesMarcadas, toggleMarcarQuestao, atualizarQuestaoRevisada }) {
            const [indiceAtual, setIndiceAtual] = useState(0);
            const [respostas, setRespostas] = useState({});
            const [respostaAtual, setRespostaAtual] = useState(null);
            const [feedback, setFeedback] = useState(null);
            const startTime = useRef(new Date());

            if (!config || config.questoes.length === 0) {
                return <div className="bg-white p-6 rounded-xl shadow text-center">
                    <h2 className="text-xl font-bold text-slate-800">Nenhuma questão para revisar!</h2>
                    <p className="mt-4 text-slate-600">Você está em dia com suas revisões. Ótimo trabalho!</p>
                    <button onClick={() => window.location.reload()} className="mt-6 bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700">Voltar ao Painel</button>
                </div>
            }

            const questaoAtual = config.questoes[indiceAtual];

            const handleResponder = () => {
                const correta = questaoAtual.alternatives.find(a => a.correta).texto;
                const acertou = respostaAtual === correta;
                setFeedback({ acertou, correta });
                setRespostas(prev => ({ ...prev, [questaoAtual.id]: { resposta: respostaAtual, acertou: acertou } }));
            };

            const handleRevisaoFeedback = (quality) => {
                atualizarQuestaoRevisada(questaoAtual.id, quality);
                proximaQuestao();
            }

            const proximaQuestao = () => {
                if (indiceAtual < config.questoes.length - 1) {
                setIndiceAtual(indiceAtual + 1);
                setRespostaAtual(null);
                setFeedback(null);
                } else {
                if (config.tipo === 'revisao') {
                    window.location.reload();
                    return;
                }
                const endTime = new Date();
                const duracao = (endTime - startTime.current) / 1000;
                const resultadoFinal = { data: new Date().toISOString(), eixoId: config.eixoId, questoes: config.questoes, tipo: config.tipo, respostas: { ...respostas, [questaoAtual.id]: { resposta: respostaAtual, acertou: respostaAtual === questaoAtual.alternatives.find(a => a.correta).texto } }, duracao: duracao };
                const acertos = Object.values(resultadoFinal.respostas).filter(r => r.acertou).length;
                resultadoFinal.acertos = acertos;
                finalizarSimulado(resultadoFinal);
                }
            };
            
            return (
                <div className="bg-white p-6 sm:p-8 rounded-xl shadow-lg max-w-4xl mx-auto">
                <div className="flex justify-between items-center mb-6">
                    <h2 className="text-xl font-bold text-slate-800">{config.tipo === 'revisao' ? 'Revisão Inteligente' : `Simulado: ${config.eixoId === 'todos' ? 'Completo' : eixos.find(e => e.id === config.eixoId)?.nome}`}</h2>
                    <div className="text-sm font-semibold text-slate-600 bg-slate-100 px-3 py-1 rounded-full">Questão {indiceAtual + 1} de {config.questoes.length}</div>
                </div>
                <div className="mt-6">
                    <div className="flex justify-between items-start"><p className="text-slate-700 leading-relaxed text-justify">{questaoAtual.enunciado}</p><div className="ml-4 flex-shrink-0" onClick={() => toggleMarcarQuestao(questaoAtual.id)}><FlagIcon marked={questoesMarcadas.includes(String(questaoAtual.id))} /></div></div>
                    <div className="mt-6 space-y-3">{questaoAtual.alternatives.map((alt, index) => (<button key={index} disabled={feedback} onClick={() => setRespostaAtual(alt.texto)} className={`w-full text-left p-4 rounded-lg border-2 transition-all ${feedback && alt.correta ? 'bg-green-100 border-green-500 ring-2 ring-green-500' : ''} ${feedback && !alt.correta && respostaAtual === alt.texto ? 'bg-red-100 border-red-500 ring-2 ring-red-500' : ''} ${!feedback && respostaAtual === alt.texto ? 'bg-indigo-100 border-indigo-500' : 'bg-slate-50 border-slate-200 hover:border-indigo-400'} ${feedback ? 'cursor-not-allowed' : 'cursor-pointer'}`}><span className="font-bold mr-3">{String.fromCharCode(65 + index)})</span>{alt.texto}</button>))}</div>
                </div>
                {feedback && (<div className={`mt-6 p-4 rounded-lg ${feedback.acertou ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}><h4 className="font-bold text-lg">{feedback.acertou ? 'Resposta Correta!' : 'Resposta Incorreta.'}</h4><p className="mt-2 text-sm text-slate-700">{questaoAtual.explicacao}</p></div>)}
                <div className="mt-8 text-right">
                    {config.tipo === 'revisao' && feedback ? (
                        <div className="flex flex-col sm:flex-row justify-end items-center space-y-2 sm:space-y-0 sm:space-x-2">
                            <p className="text-sm font-semibold text-slate-700">Como você avalia essa questão?</p>
                            <button onClick={() => handleRevisaoFeedback(0)} className="bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition-colors duration-200">Errei</button>
                            <button onClick={() => handleRevisaoFeedback(3)} className="bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-600 transition-colors duration-200">Difícil</button>
                            <button onClick={() => handleRevisaoFeedback(4)} className="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors duration-200">Bom</button>
                            <button onClick={() => handleRevisaoFeedback(5)} className="bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition-colors duration-200">Fácil</button>
                        </div>
                    ) : feedback ? (
                    <button onClick={proximaQuestao} className="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-200">{indiceAtual < config.questoes.length - 1 ? 'Próxima Questão' : 'Finalizar Simulado'}</button>
                    ) : (
                    <button onClick={handleResponder} disabled={!respostaAtual} className="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-200 disabled:bg-slate-400 disabled:cursor-not-allowed">Responder</button>
                    )}
                </div>
                </div>
            );
        }

        function ResultadoSimulado({ resultado, setPaginaAtiva }) {
            if (!resultado) { return <div className="bg-white p-6 rounded-xl shadow text-center"><h2 className="text-xl font-bold text-slate-800">Nenhum resultado para exibir.</h2><button onClick={() => setPaginaAtiva('dashboard')} className="mt-6 bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700">Voltar ao Painel</button></div>; }
            const { acertos, questoes: questoesDoSimulado, eixoId, respostas } = resultado;
            const percAcerto = ((acertos / questoesDoSimulado.length) * 100).toFixed(1);
            return (
                <div className="bg-white p-6 sm:p-8 rounded-xl shadow-lg max-w-4xl mx-auto">
                <h2 className="text-3xl font-bold text-center text-slate-800">Resultado do Simulado</h2>
                <p className="text-center text-slate-600 mb-8">{eixoId === 'todos' ? 'Simulado Completo' : eixos.find(e => e.id === eixoId)?.nome}</p>
                <div className="flex justify-around items-center bg-slate-50 p-6 rounded-lg flex-wrap gap-4">
                    <div><p className="text-sm text-slate-500">Seu desempenho</p><p className={`text-5xl font-bold ${percAcerto >= 70 ? 'text-green-600' : 'text-red-600'}`}>{percAcerto}%</p></div>
                    <div className="text-center"><p className="text-xl font-semibold">{acertos}</p><p className="text-sm text-slate-500">Acertos</p></div>
                    <div className="text-center"><p className="text-xl font-semibold">{questoesDoSimulado.length - acertos}</p><p className="text-sm text-slate-500">Erros</p></div>
                    <div className="text-center"><p className="text-xl font-semibold">{questoesDoSimulado.length}</p><p className="text-sm text-slate-500">Total</p></div>
                </div>
                <div className="mt-8"><h3 className="text-xl font-bold text-slate-800 mb-4">Revisão das Questões</h3><div className="space-y-4">{questoesDoSimulado.map((q, index) => { const respostaUsuario = respostas[q.id]; return (<div key={q.id} className="bg-slate-50 p-4 rounded-lg border border-slate-200"><div className="flex justify-between items-center"><p className="font-semibold text-slate-800">{index + 1}. {q.enunciado.substring(0, 80)}...</p>{respostaUsuario && respostaUsuario.acertou ? <CheckCircle /> : <XCircle />}</div><p className="text-sm mt-2 text-slate-600">Sua resposta: <span className="font-medium text-slate-900">{respostaUsuario ? respostaUsuario.resposta : "Não respondida"}</span></p>{respostaUsuario && !respostaUsuario.acertou && (<p className="text-sm mt-1 text-slate-600">Resposta correta: <span className="font-medium text-green-700">{q.alternatives.find(a => a.correta).texto}</span></p>)}</div>)})}</div></div>
                <div className="mt-8 text-center"><button onClick={() => setPaginaAtiva('dashboard')} className="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700">Voltar ao Painel</button></div>
                </div>
            );
        }

        function Metricas({ historico }) {
            if (historico.length === 0) return <div className="bg-white p-6 rounded-xl shadow text-center"><h2 className="text-xl font-bold text-slate-800">Minhas Métricas</h2><p className="mt-4 text-slate-600">Você ainda não completou nenhum simulado. Comece um para ver suas métricas aqui!</p></div>
            const statsPorEixo = eixos.map(eixo => { const respostasDoEixo = historico.flatMap(h => Object.entries(h.respostas).filter(([qid]) => questoes.find(q => q.id == qid)?.eixo === eixo.id)); const acertos = respostasDoEixo.filter(([,r]) => r.acertou).length; const total = respostasDoEixo.length; const perc = total > 0 ? (acertos / total * 100) : 0; return { ...eixo, acertos, total, perc: perc.toFixed(1) }; });
            const totalDuracao = historico.reduce((acc, curr) => acc + (curr.duracao || 0), 0);
            const totalQuestoes = historico.reduce((acc, curr) => acc + curr.questoes.length, 0);
            const tempoMedio = totalQuestoes > 0 ? (totalDuracao / totalQuestoes).toFixed(1) : 0;
            const getWeekNumber = (d) => { d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate())); d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7)); var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1)); var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7); return weekNo; }
            const statsPorSemana = historico.reduce((acc, curr) => { const semana = getWeekNumber(new Date(curr.data)); if (!acc[semana]) acc[semana] = { acertos: 0, total: 0, count: 0 }; acc[semana].acertos += curr.acertos; acc[semana].total += curr.questoes.length; acc[semana].count++; return acc; }, {});
            return (
                <div className="space-y-6">
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h2 className="text-2xl font-bold text-slate-800 mb-6">Minhas Métricas</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div className="bg-indigo-50 p-4 rounded-lg text-center border border-indigo-200"><p className="text-sm text-indigo-800">Tempo Médio por Questão</p><p className="text-3xl font-bold text-indigo-600">{tempoMedio}s</p><p className="text-xs text-slate-500">(Meta: 120s)</p></div>
                            <div className="bg-green-50 p-4 rounded-lg text-center border border-green-200"><p className="text-sm text-green-800">Taxa de Acerto Geral</p><p className="text-3xl font-bold text-green-600">{((totalQuestoes > 0 ? historico.reduce((a,c)=>a+c.acertos,0)/totalQuestoes : 0)*100).toFixed(1)}%</p><p className="text-xs text-slate-500">(Meta: 70%)</p></div>
                        </div>
                        <h3 className="text-lg font-semibold text-slate-700 mb-4">Desempenho por Eixo Temático (Simulados Padrão)</h3>
                        <div className="space-y-4">{statsPorEixo.map(eixo => (<div key={eixo.id}><div className="flex justify-between items-center mb-1"><p className="font-medium text-slate-600">{eixo.id}. {eixo.nome}</p><p className="font-semibold text-slate-800">{eixo.perc}% <span className="text-sm font-normal text-slate-500">({eixo.acertos}/{eixo.total})</span></p></div><div className="w-full bg-slate-200 rounded-full h-2.5"><div className="bg-indigo-600 h-2.5 rounded-full" style={{ width: `${eixo.perc}%` }}></div></div></div>))}</div>
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h3 className="text-lg font-semibold text-slate-700 mb-4">Evolução Semanal</h3>
                        <div className="flex items-end space-x-2 h-40">{Object.entries(statsPorSemana).map(([semana, data]) => { const perc = data.total > 0 ? (data.acertos / data.total * 100) : 0; return ( <div key={semana} className="flex-1 flex flex-col items-center justify-end"><div className="text-xs font-bold">{perc.toFixed(0)}%</div><div className="w-full bg-indigo-500 rounded-t-md" style={{ height: `${perc}%` }}></div><div className="text-xs mt-1">Semana {semana}</div></div> )})}</div>
                    </div>
                </div>
            );
        }

        function CronogramaView() { 
            const hoje = getTodayString();
            return ( <div className="bg-white p-6 rounded-xl shadow-sm"><h2 className="text-2xl font-bold text-slate-800 mb-4">Cronograma de Estudos</h2><div className="overflow-x-auto"><table className="w-full text-sm text-left text-slate-500"><thead className="text-xs text-slate-700 uppercase bg-slate-50"><tr><th scope="col" className="px-6 py-3">Semana</th><th scope="col" className="px-6 py-3">Dia</th><th scope="col" className="px-6 py-3">Data</th><th scope="col" className="px-6 py-3">Tópico Central</th></tr></thead><tbody>{cronogramaCompleto.map((item, index) => (<tr key={index} className={`border-b border-slate-200 ${item.data === hoje ? 'bg-indigo-100' : 'bg-white'}`}><td className="px-6 py-4 font-semibold text-slate-900">{item.semana}</td><td className="px-6 py-4">{item.dia}</td><td className="px-6 py-4">{new Date(item.data + 'T03:00:00Z').toLocaleDateString('pt-BR')}</td><td className="px-6 py-4">{item.topico}</td></tr>))}</tbody></table></div></div> ) 
        }
        function Biblioteca() { 
            const [activeDoc, setActiveDoc] = useState(null);

            return ( 
                <div className="space-y-8">
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h2 className="text-2xl font-bold text-slate-800 mb-4">Bibliografia Essencial</h2>
                        <div className="space-y-4">{bibliografia.map((item, index) => (<div key={index} className="border-l-4 border-indigo-500 pl-4"><h3 className="font-bold text-slate-900">{item.obra}</h3><p className="text-sm font-medium text-slate-600">Autor: {item.autor}</p><p className="mt-1 text-slate-700">{item.resumo}</p></div>))}</div>
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h2 className="text-2xl font-bold text-slate-800 mb-4">Documentos Analisados</h2>
                        {documentosAnalisados.map((doc, index) => (
                            <div key={doc.id} className="border-b border-slate-200 py-4 last:border-b-0">
                                <button onClick={() => setActiveDoc(activeDoc === doc.id ? null : doc.id)} className="w-full text-left">
                                    <div className="flex justify-between items-center">
                                        <h3 className="font-bold text-lg text-slate-900">{doc.titulo}</h3>
                                        <span className="text-indigo-600">{activeDoc === doc.id ? 'Ocultar' : 'Expandir'}</span>
                                    </div>
                                    <p className="text-sm font-medium text-slate-600">Autor: {doc.autor}</p>
                                </button>
                                {activeDoc === doc.id && (
                                    <div className="mt-4 space-y-4">
                                        <div>
                                            <h4 className="font-semibold text-slate-800">Relevância Temática:</h4>
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {doc.relevancia.eixos.map(eixoId => <span key={eixoId} className="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded-full">Eixo {eixoId}</span>)}
                                            </div>
                                        </div>
                                        <div>
                                            <h4 className="font-semibold text-slate-800">Resumo:</h4>
                                            <p className="text-slate-700 text-sm">{doc.conteudo.resumo}</p>
                                        </div>
                                        <div>
                                            <h4 className="font-semibold text-slate-800">Perguntas Chave:</h4>
                                            <ul className="list-disc list-inside space-y-2 text-sm text-slate-700 mt-2">
                                                {doc.conteudo.perguntas.map((p, i) => <li key={i}><strong>{p.q}</strong> {p.a}</li>)}
                                            </ul>
                                        </div>
                                        <div>
                                            <h4 className="font-semibold text-slate-800">Glossário:</h4>
                                             <ul className="list-disc list-inside space-y-2 text-sm text-slate-700 mt-2">
                                                {doc.conteudo.glossario.map((g, i) => <li key={i}><strong>{g.termo}:</strong> {g.definicao}</li>)}
                                            </ul>
                                        </div>
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm">
                        <h2 className="text-2xl font-bold text-slate-800 mb-4">Fontes de Atualização</h2>
                        <ul className="list-disc list-inside space-y-2 text-slate-700">{fontes.map((item, index) => (<li key={index}><a href={item.link} target="_blank" rel="noopener noreferrer" className="text-indigo-600 hover:underline">{item.nome}</a></li>))}</ul>
                    </div>
                </div> 
            ) 
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>

</body>
</html>
